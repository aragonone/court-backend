version: "2"

services:
  court_server_db:
    image: postgres
    environment:
      - POSTGRES_PASSWORD=${DB_PASS}
      - POSTGRES_USER=${DB_USER}

  court_server:
    build: .
    image: aragon/court-server
    command: npm run start:server
    depends_on:
      - court_server_db
    ports:
      - "8000:8000"
    env_file:
      - .env

  court_services:
    build: .
    image: aragon/court-services
    command: npm run start:services
    depends_on:
      - court_server
    env_file:
      - .env

  court_backoffice:
    build: .
    image: aragon/court-backoffice
    command: npm run start:app
    depends_on:
      - court_server
    ports:
      - "3000:3000"
    env_file:
      - .env
